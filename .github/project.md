# Контекст Проекта для ИИ-ассистента

Этот документ предоставляет ИИ-ассистенту контекст о структуре и технологиях проекта для генерации более точных и релевантнх ответов.

## Обзор Проекта

Проект представляет собой веб-приложение на **Next.js** (используя App Router), которое функционирует как сайт-портфолио. Сайт отображает информацию о проектах, технологическом стеке, услугах и отзывах.

Ключевой особенностью является интеграция с **Headless CMS Strapi** для управления всем контентом, включая проекты, навыки (технологии) и медиафайлы.

## Архитектура

Проект следует архитектуре "Backend-for-Frontend" (BFF), где Next.js выступает не только в роли фронтенд-фреймворка, но и в качестве серверного слоя, который взаимодействует со Strapi.

1. **Frontend (Next.js / React)**: Рендерит страницы и компоненты, получая данные через внутренние API-маршруты.
2. **API Routes (Next.js)**: Расположены в `app/api/`. Эти маршруты служат прокси-слоем между фронтендом и Strapi. Они инкапсулируют логику запросов к Strapi, обработку ошибок и преобразование данных.
3. **Data Fetching Layer (`lib/strapi.ts`)**: Централизованный модуль для взаимодействия со Strapi API. Он содержит функции для получения, поиска и фильтрации данных, а также для маппинга ответов от Strapi в типы, используемые в приложении.
4. **Headless CMS (Strapi)**: Внешний сервис, который служит источником всего контента. Доступ к нему осуществляется по URL `STRAPI_API_URL` с использованием ключа `STRAPI_API_KEY`.

## Ключевые Компоненты

### 1. Типы данных (`types/index.ts`)

Этот файл является "контрактом" данных для всего приложения.

- **`Project`, `Skill`, `Media`**: Определяют структуру данных, получаемых из Strapi (проекты, технологии, изображения).
- **`Translation`**: Большая и важная структура, описывающая весь текстовый контент сайта для разных языков (`en`, `de`). Это указывает на то, что сайт многоязычный, а контент управляется централизованно.

### 2. Взаимодействие со Strapi (`lib/strapi.ts`)

Этот модуль является сердцем интеграции с CMS.

- **`fetchFromStrapi`**: Универсальная функция для выполнения запросов к Strapi. Автоматически добавляет `populate=*` для получения всех связанных данных и обрабатывает аутентификацию.
- **Маппинг данных**: Функции `mapStrapiToProject`, `mapStrapiToSkill`, `mapStrapiToMedia` преобразуют "плоскую" структуру ответа Strapi в структурированные TypeScript-типы, используемые в приложении.
- **Экспортируемые функции**: `getProjects`, `getProjectById`, `searchProjects` предоставляют высокоуровневый API для получения данных о проектах.

### 3. API Маршруты (`app/api/**/*.ts`)

Эти эндпоинты предоставляют данные для фронтенда.

- `/api/projects`: Возвращает список проектов. Поддерживает параметр `?all=true` для включения неактивных проектов.
- `/api/projects/[id]`: Возвращает один проект по его ID.
- `/api/search`: Выполняет поиск по проектам (по названию и описанию) с помощью параметра `?q=...`.
- `/api/stats`: Предоставляет агрегированную статистику: общее количество проектов, количество активных/неактивных и топ-10 самых используемых технологий (навыков) во всех проектах. Этот эндпоинт выполняет кастомную логику агрегации данных на стороне Next.js.

## Основной стек

- **Фреймворк**: Next.js (App Router)
- **Язык**: TypeScript
- **CMS**: Strapi (Headless)
- **Стиль кода**: Функциональный подход, строгая типизация.

Этот файл следует поддерживать в актуальном состоянии при внесении значительных архитектурных изменений.
